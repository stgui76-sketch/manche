<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cercle des Quintes & Manche — Gammes/Modes Auto</title>
  <style>
    body { background: #212121; color: #eee; font-family: sans-serif; margin: 0;}
    header { padding: 18px 8px 2px;}
    h1 { margin:0 0 10px;}
    .toolbar { display:flex; flex-wrap:wrap; gap:8px; justify-content:center; margin:12px;}
    .toolbar select, .toolbar input, .toolbar button { padding:6px 12px; font-size:16px; border-radius:8px; border:1px solid #444;}
    #cercleWrapper {margin:12px 0; justify-content: center; display: flex;}
    #cercle {position:relative; width: min(74vw,380px); height:min(74vw,380px); border-radius: 50%; background:#343142; display: flex; align-items:center; justify-content:center;}
    .noteCercle {position:absolute;width:40px;height:40px;border-radius:50%; background:#292;color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;font-weight:700;font-size:14px;}
    .noteCercle.selected {background: #ffb300;}
    #manche { position:relative; margin:24px auto 24px; width:96%; max-width:1360px; height:clamp(220px,40vw,340px); background:#463214; border-radius:12px; overflow:hidden;}
    .fret { position:absolute; top:0; bottom:0; width:2px; background:#b48c5a;}
    .string {position:absolute; left:0; right:0; height:2px; background: #d4b075;}
    .dot { position: absolute; width:14px; height:14px; background: #ecc759; border-radius: 50%; left:50%; transform: translateX(-50%); top:48%; }
    .dot.double::after { content: ""; position: absolute; width:14px; height:14px; background: #ecc759; border-radius:50%; top:-18px; left:0;}
    .fretNumber {
      position: absolute; bottom: 2px; left: 50%;
      transform: translateX(-50%);
      font-size: 12px; color: #b8905b; background: rgba(0,0,0,.25);
      padding: 2px 5px; border-radius: 6px;
    }
    .noteManche {position:absolute; width:24px; height:24px; border-radius:50%; background:#e7d6b1; color:#33220e; font-size:13px;font-weight:700; display:flex;align-items:center;justify-content:center;}
    .noteManche.tonic {background:#ffecb3;}
    .noteManche.diese {background:#3378f4;}
    .noteManche.bemol {background:#e55151;}
    @media (max-width: 600px) { .toolbar {flex-direction:column;} #cercle {width:220px;height:220px;} #manche{height:180px;} }
  </style>
</head>
<body>
<header>
  <h1>Cercle des quintes & manche — gammes et repères réels</h1>
  <div>Clique les notes du cercle, sélectionne une gamme pour l'afficher sur le manche (avec points & numéros) !</div>
</header>

<div class="toolbar">
  <select id="menuGammes" aria-label="Choix gamme"></select>
  <input type="number" min="12" max="36" value="24" id="nbFrettes" title="Nombre de frettes" />
  <select id="menuTuning"></select>
  <button id="helpBtn">?</button>
</div>

<div id="cercleWrapper">
  <div id="cercle" aria-label="Cercle des quintes"></div>
</div>
<div id="selectedScale" aria-live="polite"></div>
<div id="manche" aria-label="Manche de guitare"></div>
<footer>v4 — repères, gammes, filtres</footer>

<div id="modalHelp" style="display:none;position:fixed;top:20vh;left:50%;transform:translateX(-50%);background
